<?xml version="1.0"?>
<!--Crazyflie Simulation-->

<opencv_storage>

    <!--Simulation-->
    <dynamics>
        <mode>"XMode"</mode>
        <inertia>2.3951e-5 2.3951e-5 3.2347e-5</inertia>
        <mass>34.1e-3</mass> <!--27.0g + 7.1g-->
        <rotor_distance>0.046</rotor_distance>
        <k_f>8.93585e-7</k_f>
        <k_t>5.161e-9</k_t>
        <rpm_min>0</rpm_min>
        <rpm_max>25000</rpm_max> <!--14000 rpm/V, 4.2 V--> <!--todo max measured rpm 25000, but motor tech says 12000kV * 4.2V = 50400 rpm ??-->
        <k_m_up>0.02</k_m_up>
        <k_m_dn>0.03</k_m_dn>
        <p_max>250</p_max>
        <q_max>250</q_max>
        <r_max>250</r_max>
        <horizon_mode>1</horizon_mode>
        <horizon_controller>
            <kp>0.0800</kp>
            <ki>0.0000</ki>
            <kd>0.0200</kd>
        </horizon_controller>
        <yaw_controller>
            <kp>0.00020</kp>
            <ki>0.00000</ki>
            <kd>0.00002</kd>
        </yaw_controller>
        <location>0. 0. 0.</location>
    </dynamics>

    <!--
    Crazyflie k_F Coefficient:
    As of the equation given on https://wiki.bitcraze.io/misc:investigations:thrust maximum rpm (25000) results in 63.27693 g "force".
    Kilogram-force (kilopond) to Newton: kp * g -> 63.27693/1000.*9.80665 = 0.6205347055845 N
    For our model we need to define a coefficient k_F which maps the prop revolutions to a force: F = k_F * RPS^2 ([N] = [N*1/s^2] [1/s^2])
    The equation on the website is then approximated by k_F = 3.57434e-6 N*1/s^2
    Since the factor is the per-rotor-force we need to divide by 4 which results in k_F = 8.93585e-07
    -->

</opencv_storage>
